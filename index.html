<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–î–ª—è –º–æ–µ–π –ú–∏–ª–µ–Ω—ã ‚ù§Ô∏è</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Great+Vibes&display=swap" rel="stylesheet">

    <style>
        :root { --rose: #ff4d6d; --bg: #fff0f3; --glass: rgba(255, 255, 255, 0.75); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; font-family: 'Comfortaa', cursive; background: var(--bg); overflow: hidden; display: flex; justify-content: center; align-items: center; }
        
        .bg-blobs { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; 
            background: radial-gradient(circle at 15% 15%, rgba(255, 179, 193, 0.5) 0%, transparent 45%), 
                        radial-gradient(circle at 85% 85%, rgba(255, 77, 109, 0.4) 0%, transparent 45%); }

        .container { width: 92%; max-width: 400px; background: var(--glass); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border-radius: 35px; padding: 30px 20px; box-shadow: 0 25px 50px rgba(0,0,0,0.1); text-align: center; border: 1px solid rgba(255,255,255,0.5); animation: fadeIn 0.8s ease-out; overflow-y: auto; max-height: 95vh; }
        
        h1 { font-family: 'Great Vibes', cursive; font-size: 3rem; color: var(--rose); margin: 0; }
        .sub-text { color: #999; font-size: 0.7rem; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px; }
        
        .timer-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0; }
        .timer-box { background: white; padding: 12px; border-radius: 18px; border: 1px solid #ffeef2; }
        .timer-val { display: block; font-size: 1.4rem; font-weight: bold; color: var(--rose); }
        .timer-lab { font-size: 0.6rem; color: #bbb; text-transform: uppercase; }

        .status-card { background: #fff; padding: 15px; border-radius: 25px; margin-top: 10px; border: 1px solid #ffeef2; }
        .status-label { font-size: 0.65rem; color: #aaa; text-transform: uppercase; margin-bottom: 5px; display: block; }
        .current-status { font-size: 1.2rem; color: var(--rose); font-weight: bold; margin-bottom: 12px; }
        select { width: 100%; padding: 10px; border-radius: 12px; border: 1px solid #eee; font-family: 'Comfortaa'; background: #fafafa; color: #666; cursor: pointer; }

        .compliment-box { background: rgba(255, 255, 255, 0.8); padding: 20px; border-radius: 20px; margin-top: 15px; border: 1px solid #ffeef2; border-left: 5px solid var(--rose); font-style: italic; color: #555; font-size: 0.9rem; line-height: 1.5; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.02); }

        .btn { padding: 18px; border-radius: 25px; border: none; font-size: 1.1rem; font-weight: bold; font-family: 'Comfortaa'; cursor: pointer; transition: 0.2s; width: 100%; }
        #yesBtn { background: var(--rose); color: white; margin-top: 20px; }
        #noBtn { background: transparent; color: #ccc; margin-top: 10px; font-size: 0.9rem; }

        .hide { display: none !important; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="bg-blobs"></div>

<div class="container" id="screen1">
    <h1>–ú–∏–ª–µ–Ω–∞</h1>
    <div class="sub-text">–í–∞–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç</div>
    <p style="color: #444; font-size: 1.1rem; line-height: 1.5;">–¢—ã ‚Äî –ª—É—á—à–µ–µ, —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å–æ –º–Ω–æ–π –∑–∞ –¥–æ–ª–≥–æ–µ –≤—Ä–µ–º—è. –ö–∞–∂–¥–∞—è –º–∏–Ω—É—Ç–∞ —Å —Ç–æ–±–æ–π –±–µ—Å—Ü–µ–Ω–Ω–∞. <br><br><b>–¢—ã —Å–æ–≥–ª–∞—Å–Ω–∞ –±—ã—Ç—å –º–æ–µ–π?</b></p>
    <div class="btn-wrap">
        <button class="btn" id="yesBtn" onclick="acceptLove()">–î–ê!</button>
        <button class="btn" id="noBtn" onclick="refuseLove()">–ù–µ—Ç</button>
    </div>
</div>

<div class="container hide" id="screen2">
    <div class="sub-text">–ú—ã –≤–º–µ—Å—Ç–µ ‚ù§Ô∏è</div>
    
    <div class="timer-grid">
        <div class="timer-box"><span class="timer-val" id="d">0</span><span class="timer-lab">–¥–Ω–µ–π</span></div>
        <div class="timer-box"><span class="timer-val" id="h">0</span><span class="timer-lab">—á–∞—Å–æ–≤</span></div>
        <div class="timer-box"><span class="timer-val" id="m">0</span><span class="timer-lab">–º–∏–Ω—É—Ç</span></div>
        <div class="timer-box"><span class="timer-val" id="s">0</span><span class="timer-lab">—Å–µ–∫—É–Ω–¥</span></div>
    </div>

    <div class="status-card">
        <span class="status-label">–ö–∞–∫ –º–Ω–µ –Ω–∞–∑–≤–∞—Ç—å —Ç–µ–±—è —Å–µ–≥–æ–¥–Ω—è:</span>
        <div class="current-status" id="displayStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <select id="statusSelect" onchange="updateStatus(this.value)">
            <option value="" disabled selected>–ö—Ç–æ —Ç—ã —Å–µ–≥–æ–¥–Ω—è?</option>
            <option value="–°–æ–ª–Ω—ã—à–∫–æ ‚òÄÔ∏è">–°–æ–ª–Ω—ã—à–∫–æ ‚òÄÔ∏è</option>
            <option value="–õ—é–±–∏–º–∞—è ‚ù§Ô∏è">–õ—é–±–∏–º–∞—è ‚ù§Ô∏è</option>
            <option value="–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞ üëë">–ü—Ä–∏–Ω—Ü–µ—Å—Å–∞ üëë</option>
            <option value="–ú–æ—è —Ä–∞–¥–æ—Å—Ç—å ‚ú®">–ú–æ—è —Ä–∞–¥–æ—Å—Ç—å ‚ú®</option>
            <option value="–ú–∏–ª–∞—à–∫–∞ üòä">–ú–∏–ª–∞—à–∫–∞ üòä</option>
            <option value="–í—Ä–µ–¥–Ω—é–∫–∞ üòà">–í—Ä–µ–¥–Ω—é–∫–∞ üòà</option>
            <option value="–°—á–∞—Å—Ç—å–µ –º–æ—ë üå∏">–°—á–∞—Å—Ç—å–µ –º–æ—ë üå∏</option>
            <option value="–ö–æ—Ä–æ–ª–µ–≤–∞ üë∏">–ö–æ—Ä–æ–ª–µ–≤–∞ üë∏</option>
        </select>
    </div>

    <div class="compliment-box" id="compText"></div>
</div>

<div class="container hide" id="screenRefuse">
    <h1>–Ø —É–≤–∞–∂–∞—é –≤—ã–±–æ—Ä</h1>
    <p>–°–ø–∞—Å–∏–±–æ –∑–∞ —Ç–≤–æ—é –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å.</p>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBW44zd70jGFtNmYOcSpSBIJw5yWLljVIQ",
        authDomain: "milena-38bd0.firebaseapp.com",
        projectId: "milena-38bd0",
        storageBucket: "milena-38bd0.firebasestorage.app",
        messagingSenderId: "530364494530",
        appId: "1:530364494530:web:1e46f2fc19011e98c6815b",
        measurementId: "G-8XCXDLGMRN",
        databaseURL: "https://milena-38bd0-default-rtdb.firebaseio.com"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const compliments = [
        "–¢–≤–æ—è —É–ª—ã–±–∫–∞ ‚Äî –º–æ—ë –ª—é–±–∏–º–æ–µ –∑—Ä–µ–ª–∏—â–µ.", "–¢—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Ç–∞–ª–∞–Ω—Ç–ª–∏–≤–∞ –≤–æ –≤—Å–µ–º.", "–£ —Ç–µ–±—è —Å–∞–º–æ–µ –¥–æ–±—Ä–æ–µ —Å–µ—Ä–¥—Ü–µ.", 
        "–¢–≤–æ–π —Å–º–µ—Ö ‚Äî –ª—É—á—à–∞—è –º—É–∑—ã–∫–∞.", "–¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è –ª—É—á—à–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.", "–¢–≤–æ–∏ –≥–ª–∞–∑–∞ —Å–≤–µ—Ç—è—Ç—Å—è –¥–æ–±—Ä–æ—Ç–æ–π.",
        "–û–±–æ–∂–∞—é —Ç–≤–æ–π —Å—Ç–∏–ª—å –∏ –≤–∫—É—Å.", "–¢—ã ‚Äî –º–æ—ë –≥–ª–∞–≤–Ω–æ–µ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ.", "–° —Ç–æ–±–æ–π —è —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –¥–æ–º–∞.",
        "–¢–≤–æ—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–Ω–∞—á–∏—Ç –¥–ª—è –º–µ–Ω—è –≤—Å—ë.", "–¢—ã –æ—á–µ–Ω—å —É–º–Ω–∞—è –∏ –º—É–¥—Ä–∞—è.", "–¢–≤–æ—è –Ω–µ–∂–Ω–æ—Å—Ç—å –º–µ–Ω—è –ø–æ–∫–æ—Ä—è–µ—Ç.",
        "–†—è–¥–æ–º —Å —Ç–æ–±–æ–π —è –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É —Å—á–∞—Å—Ç–ª–∏–≤.", "–¢—ã ‚Äî —Å–∞–º–∞—è –∫—Ä–∞—Å–∏–≤–∞—è –¥–µ–≤—É—à–∫–∞, –∫–æ—Ç–æ—Ä—É—é —è –∑–Ω–∞—é.",
        "–¢–≤–æ–π –≥–æ–ª–æ—Å —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç –º–µ–Ω—è.", "–¢—ã —É–Ω–∏–∫–∞–ª—å–Ω–∞, —Ç–∞–∫–æ–π –±–æ–ª—å—à–µ –Ω–µ—Ç.", "–£ —Ç–µ–±—è –ø–æ—Ç—Ä—è—Å–∞—é—â–µ–µ —á—É–≤—Å—Ç–≤–æ —é–º–æ—Ä–∞.",
        "–Ø –≥–æ—Ä–∂—É—Å—å —Ç–µ–º, —á—Ç–æ —Ç—ã —Å–æ –º–Ω–æ–π.", "–¢—ã ‚Äî –º–æ—ë –º–∞–ª–µ–Ω—å–∫–æ–µ —á—É–¥–æ.", "–û–±–æ–∂–∞—é —Ç–≤–æ–∏ –∏—Å–∫—Ä–µ–Ω–Ω–∏–µ —ç–º–æ—Ü–∏–∏.",
        "–¢—ã —É–º–µ–µ—à—å –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–µ –≤ –º–µ–ª–æ—á–∞—Ö.", "–¢–≤–æ—è –∑–∞–±–æ—Ç–∞ ‚Äî —ç—Ç–æ –¥–∞—Ä.", "–¢—ã —Å–≤–µ—Ç–∏—à—å—Å—è –∏–∑–Ω—É—Ç—Ä–∏.",
        "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è, –∫–∞–∫ —Ç—ã –¥—É–º–∞–µ—à—å.", "–¢—ã ‚Äî –≤–æ–ø–ª–æ—â–µ–Ω–∏–µ –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.", "–¢–≤–æ–∏ –æ–±—ä—è—Ç–∏—è ‚Äî –º–æ—ë –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ.",
        "–¢—ã –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å –≤—Å–µ–≥–æ —Å–∞–º–æ–≥–æ –ª—É—á—à–µ–≥–æ –≤ –º–∏—Ä–µ.", "–õ—é–±–ª—é —Ç–≤–æ–π –≤–∑–≥–ª—è–¥.", "–¢—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Å–∏–ª—å–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å.",
        "–° —Ç–æ–±–æ–π –ª—é–±–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ ‚Äî –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ.", "–¢—ã ‚Äî –º–æ–π —Å–∞–º—ã–π –±–ª–∏–∑–∫–∏–π —á–µ–ª–æ–≤–µ–∫.", "–£ —Ç–µ–±—è –∑–æ–ª–æ—Ç—ã–µ —Ä—É–∫–∏.",
        "–¢–≤–æ—è —ç–Ω–µ—Ä–≥–∏—è –∑–∞—Ä—è–∂–∞–µ—Ç –≤—Å–µ—Ö –≤–æ–∫—Ä—É–≥.", "–¢—ã ‚Äî –º–æ—ë —Å–æ–ª–Ω—Ü–µ –≤ –ø–∞—Å–º—É—Ä–Ω—ã–π –¥–µ–Ω—å.", "–û–±–æ–∂–∞—é —Ç–≤–æ—é –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.",
        "–¢—ã –¥–µ–ª–∞–µ—à—å —ç—Ç–æ—Ç –º–∏—Ä –∫—Ä–∞—Å–∏–≤–µ–µ.", "–¢–≤–æ—è –∏–Ω—Ç—É–∏—Ü–∏—è –º–µ–Ω—è –ø–æ—Ä–∞–∂–∞–µ—Ç.", "–¢—ã –æ—á–µ–Ω—å –∏—Å–∫—Ä–µ–Ω–Ω—è—è, –∏ —ç—Ç–æ —Ä–µ–¥–∫–æ—Å—Ç—å.",
        "–Ø —Ü–µ–Ω—é –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É —Ä—è–¥–æ–º —Å —Ç–æ–±–æ–π.", "–¢—ã ‚Äî –º–æ—è –º–µ—á—Ç–∞, —Å—Ç–∞–≤—à–∞—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é.", "–¢—ã —Å–∞–º–∞—è –æ–±–∞—è—Ç–µ–ª—å–Ω–∞—è.",
        "–¢–≤–æ–π –æ–ø—Ç–∏–º–∏–∑–º –∑–∞—Ä–∞–∑–∏—Ç–µ–ª–µ–Ω.", "–¢—ã —É–º–µ–µ—à—å —Å–ª—É—à–∞—Ç—å –∏ –ø–æ–Ω–∏–º–∞—Ç—å –±–µ–∑ —Å–ª–æ–≤.", "–¢—ã ‚Äî –º–æ—ë —Å–æ–∫—Ä–æ–≤–∏—â–µ.",
        "–£ —Ç–µ–±—è –±–µ–∑—É–ø—Ä–µ—á–Ω–∞—è —É–ª—ã–±–∫–∞.", "–¢—ã –æ—á–µ–Ω—å –≤–∞–∂–Ω–∞ –¥–ª—è –º–µ–Ω—è.", "–¢–≤–æ—è –¥–æ–±—Ä–æ—Ç–∞ –¥–µ–ª–∞–µ—Ç —Ç–µ–±—è –µ—â–µ –∫—Ä–∞—Å–∏–≤–µ–µ.",
        "–Ø –≤–ª—é–±–ª—è—é—Å—å –≤ —Ç–µ–±—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∑–∞–Ω–æ–≤–æ.", "–¢—ã ‚Äî –º–æ—ë —Å—á–∞—Å—Ç—å–µ.", "–õ—é–±–ª—é —Ç–µ–±—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ!"
    ];

    db.ref('loveDate').on('value', (snapshot) => {
        if (snapshot.val()) showTimerScreen(snapshot.val());
    });

    db.ref('currentStatus').on('value', (snapshot) => {
        document.getElementById('displayStatus').innerText = snapshot.val() || "–ú–æ—è —Ä–∞–¥–æ—Å—Ç—å ‚ù§Ô∏è";
    });

    function acceptLove() {
        db.ref('loveDate').set(Date.now());
        db.ref('currentStatus').set("–õ—é–±–∏–º–∞—è ‚ù§Ô∏è");
        confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
    }

    function updateStatus(val) {
        if (val) {
            db.ref('currentStatus').set(val);
            confetti({ particleCount: 40, spread: 60, origin: { y: 0.8 }, colors: ['#ff4d6d'] });
        }
    }

    function refuseLove() {
        db.ref('refusals').push({ time: new Date().toLocaleString() });
        document.getElementById('screen1').classList.add('hide');
        document.getElementById('screenRefuse').classList.remove('hide');
    }

    function showTimerScreen(startTime) {
        document.getElementById('screen1').classList.add('hide');
        document.getElementById('screenRefuse').classList.add('hide');
        document.getElementById('screen2').classList.remove('hide');
        
        setInterval(() => {
            const diff = Date.now() - startTime;
            document.getElementById('d').innerText = Math.floor(diff / 86400000);
            document.getElementById('h').innerText = Math.floor((diff / 3600000) % 24);
            document.getElementById('m').innerText = Math.floor((diff / 60000) % 60);
            document.getElementById('s').innerText = Math.floor((diff / 1000) % 60);
        }, 1000);

        const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 0)) / 86400000);
        document.getElementById('compText').innerText = "üíñ " + compliments[dayOfYear % compliments.length];
    }
</script>
</body>
</html>
